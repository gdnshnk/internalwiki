{
  "name": "internalwiki",
  "private": true,
  "version": "0.1.0",
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "dev:web": "/bin/zsh -lc 'set -a; source .env; set +a; npm --workspace @internalwiki/web run dev'",
    "dev:worker": "/bin/zsh -lc 'set -a; source .env; set +a; npm --workspace @internalwiki/worker run dev'",
    "build": "npm run --workspaces build",
    "typecheck": "npm run --workspaces typecheck",
    "test": "npm run --workspaces test",
    "test:quality": "npm --workspace @internalwiki/web run test -- tests/retrieval-eval-regression.test.ts",
    "eval:retrieval": "npm --workspace @internalwiki/web run eval:retrieval",
    "db:migrate": "/bin/zsh -lc 'set -a; source .env; set +a; export PATH=\"$(brew --prefix postgresql@17)/bin:$PATH\"; npm run db:migrate:raw'",
    "db:migrate:raw": "psql \"$DATABASE_URL\" -f packages/db/migrations/0001_init.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0002_runtime_indexes.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0003_auth_security.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0004_quality_feedback.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0005_session_maintenance.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0006_traceability_marketing.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0007_vector_optimization.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0008_user_onboarding.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0009_enterprise_trust_foundation.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0010_connector_catalog_refresh.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0011_source_acl_foundation.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0012_answer_verification.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0013_notion_sunset.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0014_rls_runtime_enforcement.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0015_session_runtime_controls.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0016_privacy_retention_controls.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0017_password_auth.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0018_answer_quality_contract.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0019_safe_memory_personalization.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0020_knowledge_objects.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0021_knowledge_permissions_and_dependencies.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0022_knowledge_retrieval_chunks.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0023_freshness_events_and_review_tasks.sql && psql \"$DATABASE_URL\" -f packages/db/migrations/0024_billing_pricing_foundation.sql",
    "compliance:check": "npm --workspace @internalwiki/web run compliance:check",
    "contract:check": "npm --workspace @internalwiki/web run contract:check",
    "staging:check": "npm run typecheck && npm run test && npm run compliance:check && npm run contract:check && npm run --workspace @internalwiki/web build"
  },
  "engines": {
    "node": ">=20.0.0"
  }
}
